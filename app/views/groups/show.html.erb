<%= content_tag :div, @group.id, id: 'group-id', hidden: 'hidden' %>
<%= content_tag :div, @group.timetable.data, id: 'timetable-data', hidden: 'hidden' %>

<% breadcrumb @group %>
<%= breadcrumbs %>

<% if @group.owner == current_user.id %>
  <%= link_to 'Edit', edit_group_path(@group) %>
<% end %>

<p>
  <strong>Name:</strong>
  <%= @group.name %>
</p>

<p>
  <strong>Tags:</strong>
  <%= @group.tags.map{|tag| "[#{tag}]"}.join %>
</p>

<h2>Calendar</h2>
<div id="calendar"></div>

<h2>Timetable</h2>
<div id="drag">
  <!-- left container (table with subjects) -->
  <div id="left">
    <table id="table1">
      <colgroup>
        <col width="190"/>
      </colgroup>
      <tbody>
        <tr><td class="dark"><div id="ar" class="drag clone ar">Arts</div><input id="b_ar" class="ar" type="button" value="" onclick="report('ar')" title="Show only Arts"/></td></tr>
        <tr><td class="dark"><div id="bi" class="drag clone bi">Biology</div><input id="b_bi" class="bi" type="button" value="" onclick="report('bi')" title="Show only Biology"/></td></tr>
        <tr><td class="dark"><div id="ch" class="drag clone ch">Chemistry</div><input id="b_ch" class="ch" type="button" value="" onclick="report('ch')" title="Show only Chemistry"/></td></tr>
        <tr><td class="dark"><div id="en" class="drag clone en">English</div><input id="b_en" class="en" type="button" value="" onclick="report('en')" title="Show only English"/></td></tr>
        <tr><td class="dark"><div id="et" class="drag clone et">Ethics</div><input id="b_et" class="et" type="button" value="" onclick="report('et')" title="Show only Ethics"/></td></tr>
        <tr><td class="dark"><div id="hi" class="drag clone hi">History</div><input id="b_hi" class="hi" type="button" value="" onclick="report('hi')" title="Show only History"/></td></tr>
        <tr><td class="dark"><div id="it" class="drag clone it">IT</div><input id="b_it" class="it" type="button" value="" onclick="report('it')" title="Show only IT"/></td></tr>
        <tr><td class="dark"><div id="ma" class="drag clone ma">Mathematics</div><input id="b_ma" class="ma" type="button" value="" onclick="report('ma')" title="Show only Mathematics"/></td></tr>
        <tr><td class="dark"><div id="ph" class="drag clone ph">Physics</div><input id="b_ph" class="ph" type="button" value="" onclick="report('ph')" title="Show only Physics"/></td></tr>
        <tr><td class="trash" title="Trash">Trash</td></tr>
      </tbody>
    </table>
  </div><!-- left container -->
  
  <!-- right container -->
  <div id="right">
    <table id="table2">
      <colgroup>
        <col width="50"/>
        <col width="100"/>
        <col width="100"/>
        <col width="100"/>
        <col width="100"/>
        <col width="100"/>
      </colgroup>
      <tbody>
        <tr>
          <td class="mark blank"></td>
          <td class="mark dark">Monday</td>
          <td class="mark dark">Tuesday</td>
          <td class="mark dark">Wednesday</td>
          <td class="mark dark">Thursday</td>
          <td class="mark dark">Friday</td>
        </tr>
        <tr>
          <td class="mark dark">8:00</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td class="mark dark">9:00</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td class="mark dark">10:00</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td class="mark dark">11:00</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td class="mark dark">12:00</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td class="mark dark">13:00</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td class="mark dark">14:00</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td class="mark dark">15:00</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td class="mark dark">16:00</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </div><!-- right container -->
</div>
<%= button_tag '保存', id: 'timetable-save-btn' %>

<h2>Tasks</h2>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Content</th>
      <th>Deadline</th>
      <th>Tags</th>
      <th>Owner</th>
    </tr>
  </thead>

  <tbody>
    <% @group.tasks.each do |task| %>
      <tr>
        <td><%= link_to task.title, group_task_path(task.group, task) %></td>
        <td><%= task.content %></td>
        <td><%= task.deadline %></td>
        <td><%= task.tags.join(', ') %></td>
        <td><%= task.user.name %></td>
      </tr>
    <% end %>
  </tbody>
</table>


<%= link_to 'New task', new_group_task_path(@group) %>